<div class="wrapper">
  <div class="wrapperPanier">
    <p class="separation">Mes achats</p>
    <table mat-table [dataSource]="this.data" matSort class="shoppingCartLines" *ngIf="shoppingCart != null">
      <ng-container matColumnDef="Photo">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Photo</th>
        <td mat-cell *matCellDef="let shoppingCartLine"><img src="https://photos.mandarinoriental.com/is/image/MandarinOriental/paris-2017-home" width="80"/> </td>
      </ng-container>
      <ng-container matColumnDef="Produit">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Mes products</th>
        <td mat-cell *matCellDef="let shoppingCartLine">
            <p>{{shoppingCartLine.product.title}}</p>
            <p>{{shoppingCartLine.product.producer}}</p>
        </td>
      </ng-container>
      <ng-container matColumnDef="Contenance">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Contenance choisi</th>
        <td mat-cell *matCellDef="let shoppingCartLine">
          <div class="row" style="justify-content: space-around; padding-right: 2%">
            <span><app-petit-bouton label="{{shoppingCartLine.product.variants[0].name}}" [selected]="shoppingCartLine.variant.name === shoppingCartLine.product.variants[0].name" (click)="changeVariant(shoppingCartLine, shoppingCartLine.product.variants[0])"></app-petit-bouton></span>
            <span *ngIf="shoppingCartLine.product.variants.length > 1"><app-petit-bouton label="{{shoppingCartLine.product.variants[1].name}}" [selected]="shoppingCartLine.variant.name === shoppingCartLine.product.variants[1].name" (click)="changeVariant(shoppingCartLine, shoppingCartLine.product.variants[1])"></app-petit-bouton></span>
            <span *ngIf="shoppingCartLine.product.variants.length > 2"><app-petit-bouton label="{{shoppingCartLine.product.variants[2].name}}" [selected]="shoppingCartLine.variant.name === shoppingCartLine.product.variants[2].name" (click)="changeVariant(shoppingCartLine, shoppingCartLine.product.variants[2])"></app-petit-bouton></span>
          </div>
        </td>
      </ng-container>
      <ng-container matColumnDef="Quantité">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Quantité</th>
        <td mat-cell *matCellDef="let shoppingCartLine">
          <mat-form-field>
            <input
              type="number"
              class="form-control"
              matInput
              name="quantitySelected"
              (change)="changeQuantity($event, shoppingCartLine)"
              [value]="shoppingCartLine.quantity">
          </mat-form-field>
        </td>
      </ng-container>
      <ng-container matColumnDef="Prix">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Prix</th>
        <td mat-cell *matCellDef="let shoppingCartLine">{{formatPrice(shoppingCartLine.price)}}</td>
      </ng-container>
      <ng-container matColumnDef="Retirer">
        <th mat-header-cell *matHeaderCellDef>Retirer</th>
        <td mat-cell *matCellDef="let shoppingCartLine">
          <button mat-fab color="warn" aria-label="Build" [value]="shoppingCartLine" (click)="deleteShoppingCartLine(shoppingCartLine)">
            <mat-icon>delete</mat-icon>
          </button></td>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </div>

  <div class="wrapperLivraison">
    <p class="minimumCommande">Minimum de commande nécessaire de 15€ afin d’optimiser nos colis</p>

    <div class="recapLivraison">

      <div class="recapLivraisonTitre">
        <span>Récapitulatif de commande</span>
      </div>

      <div class="recapPrix">
        <div class="textRecapPrix">
          <span>SOUS-TOTAL TTC</span>
        </div>
        <div class="recapPrixValeur" *ngIf="shoppingCart != null">
          <span>{{this.displayTotalPrice()}}</span>
        </div>
      </div>
    </div>

    <div class="LivraisonButton">
      <app-bouton label="Livraison >" padding="4% 37%" [onClick2]="deliveryStep.bind(this)"></app-bouton>
    </div>
  </div>
</div>
